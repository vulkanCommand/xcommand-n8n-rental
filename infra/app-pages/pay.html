<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>xCommand Cloud — Pricing</title>
<meta name="description" content="Choose your xCommand workspace plan. No subscriptions, no surprises.">
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: hsl(220, 20%, 4%);
    --bg-card: hsl(220, 18%, 7%);
    --fg: hsl(0, 0%, 96%);
    --muted: hsl(220, 10%, 55%);
    --border: hsl(220, 14%, 14%);
    --primary: hsl(180, 70%, 55%);
    --primary-fg: hsl(220, 20%, 4%);
    --secondary: hsl(220, 15%, 12%);
    --surface: hsl(220, 16%, 9%);
    --glow-secondary: hsl(200, 80%, 60%);
    --warn: hsl(38, 95%, 70%);
    --success: hsl(150, 70%, 55%);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--fg);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  .grid-bg {
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(var(--border) 1px, transparent 1px),
      linear-gradient(90deg, var(--border) 1px, transparent 1px);
    background-size: 60px 60px;
    opacity: 0.3;
    pointer-events: none;
    z-index: 0;
  }

  /* Header */
  header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    padding: 0 2rem;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
    background: hsla(220, 20%, 4%, 0.9);
    backdrop-filter: blur(16px);
  }

  .logo {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 1.125rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    color: var(--fg);
  }

  .logo span { color: var(--primary); }

  .nav-links {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .nav-links a {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--muted);
    text-decoration: none;
    transition: color 0.2s;
  }

  .nav-links a:hover { color: var(--fg); }
  .nav-links a.active { color: var(--primary); }

  /* Container */
  .container {
    position: relative;
    z-index: 1;
    max-width: 1120px;
    margin: 0 auto;
    padding: 120px 2rem 100px;
  }

  .section-label {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--muted);
    margin-bottom: 1rem;
  }

  h1 {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.1;
    margin-bottom: 1rem;
  }

  .subtitle {
    font-size: 1.125rem;
    color: var(--muted);
    margin-bottom: 3.5rem;
    max-width: 520px;
  }

  /* Pricing Grid */
  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    max-width: 980px;
  }

  .card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    padding: 2rem;
    display: flex;
    flex-direction: column;
    transition: border-color 0.3s, box-shadow 0.3s, transform 0.18s ease;
    position: relative;
  }

  .card:hover {
    border-color: hsla(180, 70%, 55%, 0.3);
    transform: translateY(-1px);
  }

  .card.popular {
    border-color: hsla(180, 70%, 55%, 0.4);
    box-shadow: 0 0 40px -12px hsla(180, 70%, 55%, 0.15);
  }

  .card.popular::before {
    content: '';
    position: absolute;
    top: -1px;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(to right, transparent, var(--primary), transparent);
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    justify-content: space-between;
  }

  .card-title {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 1.25rem;
    font-weight: 700;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    background: hsla(180, 70%, 55%, 0.1);
    border: 1px solid hsla(180, 70%, 55%, 0.2);
    padding: 0.125rem 0.625rem;
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.625rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--primary);
    white-space: nowrap;
  }

  .badge.soon {
    background: hsla(38, 95%, 70%, 0.08);
    border-color: hsla(38, 95%, 70%, 0.18);
    color: var(--warn);
  }

  .badge.free {
    background: hsla(150, 70%, 55%, 0.08);
    border-color: hsla(150, 70%, 55%, 0.18);
    color: var(--success);
  }

  .price {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 2.5rem;
    font-weight: 700;
  }

  .price-meta {
    font-size: 0.875rem;
    color: var(--muted);
    margin-left: 0.5rem;
  }

  .duration {
    font-size: 0.75rem;
    color: var(--muted);
    margin-top: 0.25rem;
    margin-bottom: 1rem;
  }

  .desc {
    font-size: 0.875rem;
    color: var(--muted);
    margin-bottom: 2rem;
    line-height: 1.5;
  }

  .features {
    list-style: none;
    display: grid;
    gap: 0.75rem;
    margin-bottom: 2rem;
    flex: 1;
  }

  .features li {
    display: flex;
    align-items: flex-start;
    gap: 0.625rem;
    font-size: 0.875rem;
    color: hsl(0, 0%, 88%);
  }

  .check-icon {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
    margin-top: 2px;
    color: var(--primary);
  }

  .select-btn {
    width: 100%;
    padding: 0.75rem;
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.8125rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    cursor: pointer;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--fg);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.25s;
  }

  .select-btn:hover {
    border-color: hsla(180, 70%, 55%, 0.4);
    background: var(--secondary);
  }

  .select-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--primary-fg);
    box-shadow: 0 0 20px -5px hsla(180, 70%, 55%, 0.4);
  }

  .select-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  /* Arrow icon */
  .arrow-icon {
    width: 14px;
    height: 14px;
    transition: transform 0.2s;
  }

  .select-btn:hover .arrow-icon {
    transform: translateX(4px);
  }

  /* Email Box */
  .email-box {
    margin: 2.5rem auto 0;
    max-width: 520px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    padding: 1.5rem;
    display: none;
  }

  .email-box.visible { display: grid; gap: 0.75rem; }

  .email-box label {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--muted);
  }

  .email-box input {
    padding: 0.75rem;
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--fg);
    font-family: 'Inter', system-ui, sans-serif;
    font-size: 0.9375rem;
    outline: none;
    transition: border-color 0.2s;
  }

  .email-box input:focus {
    border-color: var(--primary);
  }

  .continue-btn {
    margin-top: 0.25rem;
    padding: 0.75rem;
    border: 1px solid var(--primary);
    background: var(--primary);
    color: var(--primary-fg);
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.8125rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    cursor: pointer;
    transition: box-shadow 0.2s, transform 0.1s;
  }

  .continue-btn:hover {
    box-shadow: 0 0 20px -5px hsla(180, 70%, 55%, 0.4);
    transform: translateY(-1px);
  }

  .continue-btn:disabled {
    opacity: 0.6;
    cursor: wait;
    transform: none;
    box-shadow: none;
  }

  .hint {
    font-size: 0.75rem;
    color: var(--muted);
    line-height: 1.5;
  }

  /* Footer */
  footer {
    position: relative;
    z-index: 1;
    border-top: 1px solid var(--border);
    padding: 2rem;
    text-align: center;
  }

  footer p {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.6875rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--muted);
  }

  /* --- Cinematic Provision Overlay --- */
  .hidden { display: none !important; }

  .overlay {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: hsla(220, 20%, 4%, 0.97);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow: hidden;
  }

  /* Animated background grid */
  .overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(hsla(180, 70%, 55%, 0.04) 1px, transparent 1px),
      linear-gradient(90deg, hsla(180, 70%, 55%, 0.04) 1px, transparent 1px);
    background-size: 40px 40px;
    animation: gridPan 20s linear infinite;
  }

  @keyframes gridPan {
    0% { transform: translate(0, 0); }
    100% { transform: translate(40px, 40px); }
  }

  /* Ambient glow orbs */
  .overlay-glow {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0;
    animation: glowPulse 4s ease-in-out infinite;
    pointer-events: none;
  }

  .overlay-glow.g1 {
    width: 400px; height: 400px;
    top: 10%; left: 15%;
    background: hsla(180, 70%, 55%, 0.15);
    animation-delay: 0s;
  }

  .overlay-glow.g2 {
    width: 350px; height: 350px;
    bottom: 15%; right: 10%;
    background: hsla(200, 80%, 60%, 0.12);
    animation-delay: 2s;
  }

  .overlay-glow.g3 {
    width: 250px; height: 250px;
    top: 50%; left: 55%;
    background: hsla(260, 60%, 60%, 0.08);
    animation-delay: 1s;
  }

  @keyframes glowPulse {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.15); }
  }

  /* Main cinematic card */
  .cinema-card {
    position: relative;
    z-index: 2;
    width: min(920px, 100%);
    border: 1px solid hsla(180, 70%, 55%, 0.15);
    background: hsla(220, 18%, 6%, 0.85);
    backdrop-filter: blur(20px);
    box-shadow:
      0 0 80px -20px hsla(180, 70%, 55%, 0.12),
      inset 0 1px 0 hsla(180, 70%, 55%, 0.08);
    animation: cardReveal 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(30px) scale(0.97);
  }

  @keyframes cardReveal {
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  .cinema-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
  }

  .cinema-title {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--fg);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .cinema-pulse {
    width: 10px; height: 10px;
    border-radius: 50%;
    background: var(--primary);
    box-shadow: 0 0 20px hsla(180, 70%, 55%, 0.5);
    animation: pulse 1.2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.6); opacity: 1; }
  }

  .cinema-timer {
    font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
    font-size: 0.75rem;
    color: var(--muted);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .cinema-timer span {
    color: var(--primary);
    font-weight: 600;
  }

  /* Logo carousel */
  .logo-strip {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 32px;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
    overflow: hidden;
  }

  .tech-logo {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    opacity: 0;
    transform: translateY(10px);
    animation: logoIn 0.5s ease forwards;
  }

  .tech-logo .logo-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border);
    background: hsla(220, 15%, 10%, 0.6);
    transition: all 0.3s ease;
  }

  .tech-logo.active .logo-icon {
    border-color: hsla(180, 70%, 55%, 0.4);
    background: hsla(180, 70%, 55%, 0.08);
    box-shadow: 0 0 20px -4px hsla(180, 70%, 55%, 0.3);
  }

  .tech-logo .logo-icon svg {
    width: 22px; height: 22px;
    color: var(--muted);
    transition: color 0.3s;
  }

  .tech-logo.active .logo-icon svg {
    color: var(--primary);
  }

  .tech-logo .logo-label {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.55rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--muted);
    transition: color 0.3s;
  }

  .tech-logo.active .logo-label {
    color: var(--primary);
  }

  @keyframes logoIn {
    to { opacity: 1; transform: translateY(0); }
  }

  /* Steps area */
  .cinema-steps {
    padding: 20px 24px;
    display: grid;
    gap: 8px;
    min-height: 260px;
  }

  .step-row {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 10px 14px;
    border: 1px solid transparent;
    opacity: 0;
    transform: translateX(-12px);
    animation: stepIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    transition: border-color 0.3s, background 0.3s;
  }

  .step-row.active {
    border-color: hsla(180, 70%, 55%, 0.15);
    background: hsla(180, 70%, 55%, 0.03);
  }

  .step-row.done {
    opacity: 0.5;
  }

  @keyframes stepIn {
    to { opacity: 1; transform: translateX(0); }
  }

  .step-icon {
    width: 32px; height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border);
    flex-shrink: 0;
    position: relative;
  }

  .step-icon svg {
    width: 16px; height: 16px;
    color: var(--muted);
  }

  .step-row.active .step-icon {
    border-color: hsla(180, 70%, 55%, 0.4);
  }

  .step-row.active .step-icon svg {
    color: var(--primary);
  }

  .step-row.done .step-icon svg {
    color: var(--success);
  }

  /* Spinner ring */
  .step-spinner {
    position: absolute;
    inset: -2px;
    border: 2px solid transparent;
    border-top-color: var(--primary);
    animation: spin 0.8s linear infinite;
    display: none;
  }

  .step-row.active .step-spinner {
    display: block;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .step-info {
    flex: 1;
    min-width: 0;
  }

  .step-label {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--fg);
    letter-spacing: 0.02em;
  }

  .step-row.done .step-label {
    color: var(--muted);
  }

  .step-sub {
    font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
    font-size: 0.68rem;
    color: hsla(180, 70%, 55%, 0.6);
    margin-top: 2px;
  }

  .step-status {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 0.6rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    white-space: nowrap;
  }

  .step-row.active .step-status { color: var(--primary); }
  .step-row.done .step-status { color: var(--success); }

  /* Progress bar */
  .cinema-progress {
    margin: 0 24px;
    height: 4px;
    border: 1px solid var(--border);
    background: hsla(220, 15%, 10%, 0.6);
    overflow: hidden;
    position: relative;
  }

  .cinema-progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--primary), var(--glow-secondary));
    box-shadow: 0 0 16px -2px hsla(180, 70%, 55%, 0.5);
    transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
  }

  .cinema-progress-bar::after {
    content: '';
    position: absolute;
    right: 0;
    top: -4px;
    bottom: -4px;
    width: 20px;
    background: hsla(180, 70%, 55%, 0.6);
    filter: blur(8px);
  }

  /* Footer */
  .cinema-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 24px;
    border-top: 1px solid var(--border);
    margin-top: 20px;
    font-size: 0.75rem;
    color: var(--muted);
  }

  .cinema-footer strong { color: var(--fg); font-weight: 600; }

  .overlay-error {
    margin: 12px 24px 0;
    padding: 10px 14px;
    border: 1px solid hsla(38, 95%, 70%, 0.2);
    background: hsla(38, 95%, 70%, 0.05);
    color: var(--warn);
    font-size: 0.8rem;
    line-height: 1.4;
    display: none;
    font-family: 'Space Grotesk', system-ui, sans-serif;
  }

  /* Success flash */
  .cinema-success {
    position: absolute;
    inset: 0;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    z-index: 10;
    background: hsla(220, 18%, 6%, 0.95);
    animation: successIn 0.6s ease forwards;
  }

  .cinema-success.show { display: flex; }

  @keyframes successIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .success-check {
    width: 64px; height: 64px;
    border: 2px solid var(--success);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: checkPop 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.2s forwards;
    transform: scale(0);
    box-shadow: 0 0 40px -8px hsla(150, 70%, 55%, 0.4);
  }

  .success-check svg {
    width: 28px; height: 28px;
    color: var(--success);
  }

  @keyframes checkPop {
    to { transform: scale(1); }
  }

  .success-text {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--fg);
    letter-spacing: 0.04em;
    opacity: 0;
    animation: fadeUp 0.4s ease 0.5s forwards;
  }

  .success-sub {
    font-size: 0.85rem;
    color: var(--muted);
    opacity: 0;
    animation: fadeUp 0.4s ease 0.7s forwards;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Floating particles */
  .particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 1;
  }

  .particle {
    position: absolute;
    width: 3px; height: 3px;
    background: var(--primary);
    border-radius: 50%;
    opacity: 0;
    animation: particleFloat linear infinite;
  }

  @keyframes particleFloat {
    0% { opacity: 0; transform: translateY(100vh) scale(0); }
    10% { opacity: 0.6; }
    90% { opacity: 0.3; }
    100% { opacity: 0; transform: translateY(-20px) scale(1.5); }
  }

  @media (max-width: 768px) {
    header { padding: 0 1rem; }
    .container { padding: 100px 1rem 60px; }
    .nav-links { gap: 1rem; }
    .nav-links a { font-size: 0.6rem; letter-spacing: 0.1em; }
    .pricing-grid { grid-template-columns: 1fr; }
    .subtitle { margin-bottom: 2rem; }
    .logo-strip { gap: 16px; flex-wrap: wrap; }
    .tech-logo .logo-icon { width: 34px; height: 34px; }
    .tech-logo .logo-icon svg { width: 18px; height: 18px; }
    .cinema-steps { min-height: 200px; }
    .step-row { padding: 8px 10px; gap: 10px; }
    .step-icon { width: 28px; height: 28px; }
  }

  @media (max-width: 400px) {
    header { padding: 0 0.75rem; height: 56px; }
    .logo { font-size: 1rem; }
    .nav-links { gap: 0.5rem; }
    .nav-links a { font-size: 0.5rem; letter-spacing: 0.06em; }
    .container { padding: 80px 0.75rem 40px; }
    .card { padding: 1.25rem; }
    .price { font-size: 2rem; }
    .email-box { padding: 1rem; }
    h1 { font-size: 1.5rem; }
  }
</style>
</head>
<body>

<div class="grid-bg"></div>

<header>
  <a href="https://xcommand.cloud" class="logo" style="text-decoration:none;">xCommand<span>.</span></a>
  <nav class="nav-links">
    <a href="https://xcommand.cloud/">Home</a>
    <a href="https://xcommand.cloud/pay.html" class="active">Plans</a>
    <a href="https://xcommand.cloud/ready.html">Workspace</a>
    <a href="https://app.xcommand.cloud/support">Support</a>
  </nav>
</header>

<div class="container">
  <p class="section-label">Pricing</p>
  <h1>Choose Your Workspace Plan</h1>
  <p class="subtitle">No setup. No maintenance. Your isolated n8n workspace launches instantly.</p>

  <div class="pricing-grid">
    <!-- Free -->
    <div class="card popular" data-plan="free">
      <div class="card-header">
        <span class="card-title">Free</span>
        <span class="badge free">Try it</span>
      </div>
      <div style="margin-bottom: 0.25rem;">
        <span class="price">$0</span>
        <span class="price-meta">per workspace</span>
      </div>
      <p class="duration">24 hours access</p>
      <p class="desc">Instant sandbox for trying xCommand. Same workflow UI. Auto-expires after 24 hours.</p>
      <ul class="features">
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Dedicated n8n workspace</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Full n8n UI</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Zero setup required</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Auto-expiry after 24 hours</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>One click to start</li>
      </ul>
      <button class="select-btn">
        Select plan
        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
      </button>
    </div>

    <!-- Explorer -->
    <div class="card" data-plan="1d" data-disabled="true">
      <div class="card-header">
        <span class="card-title">Explorer</span>
        <span class="badge soon">Coming soon</span>
      </div>
      <div style="margin-bottom: 0.25rem;">
        <span class="price">$1</span>
        <span class="price-meta">per workspace</span>
      </div>
      <p class="duration">24 hours access</p>
      <p class="desc">Perfect for quick experiments, testing a single integration, or evaluating n8n.</p>
      <ul class="features">
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Dedicated n8n workspace</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Full n8n UI</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Zero setup required</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Auto-expiry after 24 hours</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Secure isolated container</li>
      </ul>
      <button class="select-btn" disabled>
        Select plan
        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
      </button>
    </div>

    <!-- Builder -->
    <div class="card" data-plan="5d" data-disabled="true">
      <div class="card-header">
        <span class="card-title">Builder</span>
        <span class="badge soon">Coming soon</span>
      </div>
      <div style="margin-bottom: 0.25rem;">
        <span class="price">$3</span>
        <span class="price-meta">per workspace</span>
      </div>
      <p class="duration">5 days access</p>
      <p class="desc">For serious prototyping, multi-step workflows, and team evaluation sprints.</p>
      <ul class="features">
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Dedicated n8n workspace</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Full n8n UI</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Zero setup required</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Auto-expiry after 5 days</li>
        <li><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Perfect for multi-day builds</li>
      </ul>
      <button class="select-btn" disabled>
        Select plan
        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
      </button>
    </div>
  </div>

  <!-- Email box -->
  <div class="email-box" id="email-box">
    <label for="email-input">Your email for this workspace</label>
    <input id="email-input" type="email" placeholder="you@example.com" required>
    <button class="continue-btn" id="continue-btn">Continue</button>
    <p class="hint" id="hint-text">We'll use this email to provision and look up your workspace.</p>
  </div>
</div>

<footer>
  <p>&copy; 2026 xCommand Cloud. All rights reserved.</p>
</footer>

<!-- Cinematic Provision Overlay -->
<div class="overlay hidden" id="provision-overlay" aria-hidden="true">
  <!-- Floating particles -->
  <div class="particles" id="particles"></div>

  <!-- Ambient glow -->
  <div class="overlay-glow g1"></div>
  <div class="overlay-glow g2"></div>
  <div class="overlay-glow g3"></div>

  <div class="cinema-card">
    <!-- Success overlay (hidden initially) -->
    <div class="cinema-success" id="cinema-success">
      <div class="success-check">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
      </div>
      <div class="success-text">Workspace Ready</div>
      <div class="success-sub">Redirecting you now…</div>
    </div>

    <div class="cinema-header">
      <div class="cinema-title">
        <span class="cinema-pulse"></span>
        Provisioning Workspace
      </div>
      <div class="cinema-timer">
        Elapsed: <span id="elapsed-timer">0s</span>
      </div>
    </div>

    <!-- Tech logo strip -->
    <div class="logo-strip" id="logo-strip">
      <!-- Docker -->
      <div class="tech-logo" id="logo-docker" style="animation-delay: 0.1s">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="1" y="8" width="22" height="12" rx="1"/>
            <rect x="4" y="4" width="4" height="4"/>
            <rect x="10" y="4" width="4" height="4"/>
            <rect x="4" y="11" width="3" height="3"/>
            <rect x="9" y="11" width="3" height="3"/>
            <rect x="14" y="11" width="3" height="3"/>
          </svg>
        </div>
        <span class="logo-label">Docker</span>
      </div>

      <!-- n8n -->
      <div class="tech-logo" id="logo-n8n" style="animation-delay: 0.2s">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="6" cy="12" r="3"/>
            <circle cx="18" cy="6" r="3"/>
            <circle cx="18" cy="18" r="3"/>
            <line x1="9" y1="12" x2="15" y2="7"/>
            <line x1="9" y1="12" x2="15" y2="17"/>
          </svg>
        </div>
        <span class="logo-label">n8n</span>
      </div>

      <!-- Node.js -->
      <div class="tech-logo" id="logo-node" style="animation-delay: 0.3s">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <polygon points="12 2 22 8 22 16 12 22 2 16 2 8"/>
            <text x="12" y="15" text-anchor="middle" font-size="7" fill="currentColor" stroke="none" font-family="monospace" font-weight="bold">JS</text>
          </svg>
        </div>
        <span class="logo-label">Node.js</span>
      </div>

      <!-- Nginx -->
      <div class="tech-logo" id="logo-nginx" style="animation-delay: 0.4s">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <polygon points="12 2 22 7 22 17 12 22 2 17 2 7"/>
            <polyline points="7 9 7 16 10 9 10 16"/>
          </svg>
        </div>
        <span class="logo-label">Nginx</span>
      </div>

      <!-- Encryption -->
      <div class="tech-logo" id="logo-ssl" style="animation-delay: 0.5s">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="5" y="11" width="14" height="10" rx="1"/>
            <path d="M8 11V7a4 4 0 0 1 8 0v4"/>
            <circle cx="12" cy="16" r="1.5"/>
          </svg>
        </div>
        <span class="logo-label">SSL/TLS</span>
      </div>

      <!-- Cloud -->
      <div class="tech-logo" id="logo-cloud" style="animation-delay: 0.6s">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
          </svg>
        </div>
        <span class="logo-label">Cloud</span>
      </div>
    </div>

    <!-- Steps -->
    <div class="cinema-steps" id="cinema-steps"></div>

    <!-- Progress -->
    <div class="cinema-progress">
      <div class="cinema-progress-bar" id="progress-bar"></div>
    </div>

    <!-- Error -->
    <div class="overlay-error" id="overlay-error">
      ⚠ Provisioning failed. Please refresh and try again.
    </div>

    <!-- Footer -->
    <div class="cinema-footer">
      <div>Plan: <strong id="overlay-plan">Free</strong></div>
      <div>Email: <strong id="overlay-email">—</strong></div>
    </div>
  </div>
</div>

<script>
const API_BASE = "https://api.app.xcommand.cloud";
const CHECKOUT_ENDPOINT = "/stripe/create-checkout-session";
const FREE_PROVISION_ENDPOINT = "/provision/free";

const cards = document.querySelectorAll(".card");
const emailBox = document.getElementById("email-box");
const emailInput = document.getElementById("email-input");
const continueBtn = document.getElementById("continue-btn");
const hintText = document.getElementById("hint-text");

const overlay = document.getElementById("provision-overlay");
const stepsContainer = document.getElementById("cinema-steps");
const progressBar = document.getElementById("progress-bar");
const overlayPlan = document.getElementById("overlay-plan");
const overlayEmail = document.getElementById("overlay-email");
const overlayError = document.getElementById("overlay-error");
const elapsedTimer = document.getElementById("elapsed-timer");
const cinemaSuccess = document.getElementById("cinema-success");
const particlesContainer = document.getElementById("particles");

let selectedPlan = null;
let timerInterval = null;

function isFree(plan) { return plan === "free"; }

function setContinueText() {
  if (isFree(selectedPlan)) {
    continueBtn.textContent = "Start Free Workspace";
    hintText.textContent = "We'll create your workspace now and redirect you to the ready page.";
  } else {
    continueBtn.textContent = "Continue to checkout";
    hintText.textContent = "We'll use this email to provision and look up your workspace. Stripe will also ask for an email for the receipt.";
  }
}

function setContinueLoading(isLoading) {
  continueBtn.disabled = isLoading;
  if (!selectedPlan) { continueBtn.textContent = "Continue"; return; }
  if (isLoading) {
    continueBtn.textContent = isFree(selectedPlan) ? "Provisioning…" : "Creating secure checkout…";
  } else {
    setContinueText();
  }
}

// Create floating particles
function spawnParticles() {
  particlesContainer.innerHTML = '';
  for (let i = 0; i < 30; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + '%';
    p.style.animationDuration = (4 + Math.random() * 6) + 's';
    p.style.animationDelay = Math.random() * 5 + 's';
    p.style.width = (2 + Math.random() * 3) + 'px';
    p.style.height = p.style.width;
    if (Math.random() > 0.5) p.style.background = 'hsla(200, 80%, 60%, 0.7)';
    particlesContainer.appendChild(p);
  }
}

// Elapsed timer
function startTimer() {
  let seconds = 0;
  elapsedTimer.textContent = '0s';
  timerInterval = setInterval(() => {
    seconds++;
    elapsedTimer.textContent = seconds + 's';
  }, 1000);
}

function stopTimer() {
  clearInterval(timerInterval);
}

// Activate a tech logo
function activateLogo(id) {
  document.querySelectorAll('.tech-logo').forEach(l => l.classList.remove('active'));
  const el = document.getElementById(id);
  if (el) el.classList.add('active');
}

// Step definitions with icons and associated logos
const STEPS = [
  {
    label: "Allocating isolated workspace slot",
    sub: "docker run --isolation=process xcommand/workspace",
    logo: "logo-docker",
    iconPath: '<rect x="1" y="8" width="22" height="12" rx="1"/><rect x="4" y="4" width="4" height="4"/><rect x="10" y="4" width="4" height="4"/>',
  },
  {
    label: "Pulling n8n automation engine",
    sub: "pulling n8nio/n8n:latest → layer 1/7",
    logo: "logo-n8n",
    iconPath: '<circle cx="6" cy="12" r="3"/><circle cx="18" cy="6" r="3"/><circle cx="18" cy="18" r="3"/><line x1="9" y1="12" x2="15" y2="7"/><line x1="9" y1="12" x2="15" y2="17"/>',
  },
  {
    label: "Initializing Node.js runtime",
    sub: "node --max-old-space-size=512 /usr/local/bin/n8n",
    logo: "logo-node",
    iconPath: '<polygon points="12 2 22 8 22 16 12 22 2 16 2 8"/>',
  },
  {
    label: "Configuring reverse proxy & routing",
    sub: "nginx -s reload → upstream ws.xcommand.cloud",
    logo: "logo-nginx",
    iconPath: '<polygon points="12 2 22 7 22 17 12 22 2 17 2 7"/><polyline points="7 9 7 16 10 9 10 16"/>',
  },
  {
    label: "Applying SSL encryption & health checks",
    sub: "certbot --nginx -d *.xcommand.cloud → OK",
    logo: "logo-ssl",
    iconPath: '<rect x="5" y="11" width="14" height="10" rx="1"/><path d="M8 11V7a4 4 0 0 1 8 0v4"/>',
  },
  {
    label: "Generating workspace URL",
    sub: "https://{id}.app.xcommand.cloud → 200 OK",
    logo: "logo-cloud",
    iconPath: '<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>',
  },
];

function addStep(step, index) {
  const row = document.createElement('div');
  row.className = 'step-row active';
  row.style.animationDelay = `${index * 0.08}s`;
  row.innerHTML = `
    <div class="step-icon">
      <div class="step-spinner"></div>
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">${step.iconPath}</svg>
    </div>
    <div class="step-info">
      <div class="step-label">${step.label}</div>
      <div class="step-sub">${step.sub}</div>
    </div>
    <div class="step-status">Running</div>
  `;
  stepsContainer.appendChild(row);
  return row;
}

function completeStep(row) {
  row.classList.remove('active');
  row.classList.add('done');
  const icon = row.querySelector('.step-icon svg');
  icon.innerHTML = '<polyline points="20 6 9 17 4 12"/>';
  row.querySelector('.step-status').textContent = 'Done';
}

function showOverlay(plan, email) {
  overlayPlan.textContent = isFree(plan) ? "Free" : plan;
  overlayEmail.textContent = email;
  overlayError.style.display = "none";
  stepsContainer.innerHTML = "";
  progressBar.style.width = "0%";
  cinemaSuccess.classList.remove("show");
  overlay.classList.remove("hidden");
  overlay.setAttribute("aria-hidden", "false");
  document.body.style.overflow = "hidden";
  spawnParticles();
  startTimer();
}

async function runFreeProvision(plan, email) {
  showOverlay(plan, email);

  const pctPerStep = 90 / STEPS.length;

  for (let i = 0; i < STEPS.length; i++) {
    const step = STEPS[i];
    activateLogo(step.logo);
    const row = addStep(step, i);
    progressBar.style.width = `${Math.round((i + 0.5) * pctPerStep)}%`;

    await new Promise(r => setTimeout(r, 600 + Math.random() * 400));

    completeStep(row);
    progressBar.style.width = `${Math.round((i + 1) * pctPerStep)}%`;

    await new Promise(r => setTimeout(r, 150));
  }

  // API call
  try {
    const res = await fetch(API_BASE + FREE_PROVISION_ENDPOINT, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email })
    });

    if (!res.ok) {
      const txt = await res.text();
      throw new Error(txt || "Provision API error");
    }

    const data = await res.json();
    progressBar.style.width = "100%";
    stopTimer();

    // Show success
    document.querySelectorAll('.tech-logo').forEach(l => l.classList.add('active'));
    cinemaSuccess.classList.add("show");

    await new Promise(r => setTimeout(r, 1500));
    window.location.href = `${window.location.origin}/ready.html`;
  } catch (err) {
    console.error(err);
    stopTimer();
    overlayError.style.display = "block";
    progressBar.style.width = "100%";

    // Add error step
    const errRow = document.createElement('div');
    errRow.className = 'step-row active';
    errRow.innerHTML = `
      <div class="step-icon" style="border-color: hsla(38, 95%, 70%, 0.4);">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="color: var(--warn);">
          <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
        </svg>
      </div>
      <div class="step-info">
        <div class="step-label" style="color: var(--warn);">Provisioning failed</div>
        <div class="step-sub" style="color: hsla(38, 95%, 70%, 0.6);">Please refresh and try again</div>
      </div>
      <div class="step-status" style="color: var(--warn);">Error</div>
    `;
    stepsContainer.appendChild(errRow);
    setContinueLoading(false);
    document.body.style.overflow = "";
  }
}

// Card selection
cards.forEach(card => {
  const btn = card.querySelector(".select-btn");
  const disabled = card.getAttribute("data-disabled") === "true";
  if (disabled) return;

  btn.addEventListener("click", () => {
    document.querySelectorAll(".select-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    selectedPlan = card.dataset.plan;
    emailBox.classList.add("visible");
    setContinueText();
    emailBox.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => emailInput.focus(), 400);
  });
});

// Continue button
continueBtn.addEventListener("click", async () => {
  if (!selectedPlan) { alert("Please select a plan first."); return; }
  const email = emailInput.value.trim();
  if (!email) { alert("Please enter your email."); emailInput.focus(); return; }

  try {
    localStorage.setItem("x_email", email);
    localStorage.setItem("x_plan", selectedPlan);
  } catch (e) { console.warn("localStorage not available", e); }

  if (isFree(selectedPlan)) {
    setContinueLoading(true);
    await runFreeProvision(selectedPlan, email);
    return;
  }

  // Paid: Stripe flow
  const successUrl = window.location.origin + "/ready.html";
  const cancelUrl = window.location.href;
  setContinueLoading(true);

  try {
    const res = await fetch(API_BASE + CHECKOUT_ENDPOINT, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, plan: selectedPlan, success_url: successUrl, cancel_url: cancelUrl })
    });
    if (!res.ok) { const txt = await res.text(); throw new Error(txt || "Checkout API error"); }
    const data = await res.json();
    if (data.checkout_url) { window.location.href = data.checkout_url; }
    else if (data.id) { alert("Backend returned a session id but checkout_url is missing."); setContinueLoading(false); }
    else { throw new Error("Unexpected response from checkout endpoint."); }
  } catch (err) {
    console.error(err);
    alert("Could not start checkout. Please try again.");
    setContinueLoading(false);
  }
});
</script>
</body>
</html>